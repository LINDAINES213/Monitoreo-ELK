# ==========================================
# HEARTBEAT CONFIGURATION
# Monitorea la disponibilidad de los endpoints de la API
# ==========================================

# ==========================================
# MONITORS - Definici√≥n de endpoints a monitorear
# ==========================================
heartbeat.monitors:
  # Monitor 1: Health Check General de la API
  - type: http
    id: api-health-check
    name: "Santa Ana API - Health"
    schedule: '@every 30s'
    hosts: ["http://api:8000/api/health/"]
    check.request:
      method: GET
    check.response:
      status: 200
    timeout: 10s

# ==========================================
# ELASTICSEARCH OUTPUT - ELASTIC CLOUD
# ==========================================
cloud.id: ${ELASTIC_CLOUD_ID}
cloud.auth: elastic:${ELASTIC_PASSWORD}

output.elasticsearch:
  index: "santa-ana-heartbeat-%{+yyyy.MM.dd}"

# ==========================================
# SETUP
# ==========================================
setup.ilm.enabled: false
setup.template.name: "santa-ana-heartbeat"
setup.template.pattern: "santa-ana-heartbeat-*"
setup.template.settings:
  index.number_of_shards: 1
  index.number_of_replicas: 0

# ==========================================
# LOGGING
# ==========================================
logging.level: info
logging.to_files: true
logging.files:
  path: /var/log/heartbeat
  name: heartbeat
  keepfiles: 7
  permissions: 0644












